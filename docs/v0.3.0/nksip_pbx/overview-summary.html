<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>NkPBX Sample Application
</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<h1>NkPBX Sample Application
</h1>
<p>Copyright © 2013 Carlos Gonzalez Florido</p>
<p><b>Version:</b> 0.3.0</p>
<p><b>Authors:</b> Carlos Gonzalez Florido (<a href="mailto:carlosj.gf@gmail.com"><tt>carlosj.gf@gmail.com</tt></a>).</p>
<p>This Erlang application is a <i>SipApp</i> implementing a basic PBX-like SIP proxy application with some extras. Its purpose is to demostrate the use of NkSIP SipApps. it starts a new SipApp named <code>pbx</code> listening on all of the host's interfaces, port 5060 for tcp and udp protocols and 5061 for tls. </p>

<p>Any SIP endpoint can register with the server, using any user, domain "nksip" or "127.0.0.1" (you can add more domains in <a href="nksip_pbx_sipapp.html"><code>nksip_pbx_sipapp</code></a>), and password "1234" (for exmple "100@nksip").</p>

<p>From this moment on, any endpoint can <i>call</i> any other using its registered name (or <i>address-of-record</i>) through the proxy. NkPBX starts to monitor in background each registered endpoint, measuring its response time with periodic <i>OPTION</i> requests.</p>

<p>There are some special addresses or "extensions" available:</p>

<table border="1">
  <tr><th>Extension</th><th>Description</th></tr>
  <tr>
  	<td><code>200@nksip</code></td>
  	<td>Send the call in parallel to all registered endpoints but me, including
  	    a <i>Record-Route</i>, so all dialog requests will go through this proxy.</td>
  </tr>
  <tr>
  	<td><code>201@nksip</code></td>
  	<td>Send the call in parallel to each two random registered endpoints. 
  		Include a custom header but no <i>Record-Route</i>, so next dialog requests 
  		will go directly to the endpoint.</td>
  </tr>
  <tr>
  	<td><code>202@nksip</code></td>
  	<td>Send the request to the <i>fastest</i> registered endpoint.</td>
  </tr>
  <tr>
  	<td><code>203@nksip</code></td>
  	<td>Send the request to the <i>slowest</i> registered endpoint.</td>
  </tr>
  <tr>
  	<td><code>(any)@nksip</code></td>
  	<td>If this contact is registered, send the call to it.</td>
  </tr>
  <tr>
  	<td><code>nksip</code></td>
  	<td>Process the request in the proxy. Since we have not implemented <code>invite/4</code>, 
  		<code>options/4</code>, etc. callback functions, all responses will be default responses
  		as defined in <code>nksip_sipapp</code>). <i>REGISTER</i> requests will be processed 
  		as configured when starting the SipApp.</td>
  </tr>
</table>


<p>Feel free to use the functions <a href="nksip_pbx.html#trace-1"><code>nksip_pbx:trace/1</code></a> to start or stop the trace of
SIP messages to console or <a href="nksip_pbx.html#loglevel-1"><code>nksip_pbx:loglevel/1</code></a> ro change the console log level. </p>

Use the function <a href="nksip_pbx_sipapp.html#check_speed-1"><code>nksip_pbx_sipapp:check_speed/1</code></a> to stop the automatic generation of
<i>OPTION</i> requests.

<hr>
<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc, Nov 15 2013, 19:25:56.</i></p>
</body>
</html>
